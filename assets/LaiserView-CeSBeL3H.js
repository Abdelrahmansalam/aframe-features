import{_ as v,d as g,w as h,r as i,o as f,a as s}from"./index-C3gOJvvE.js";AFRAME.registerComponent("laser",{init:function(){this.isMouseDown=!1,this.createLaser=o=>{this.isMouseDown=!0,this.updateLaser(o)},this.updateLaser=o=>{if(!this.isMouseDown)return;console.log(o);let l=document.querySelector("#scene"),e=document.createElement("a-cylinder");e.setAttribute("radius","0.01"),e.setAttribute("color","red"),e.setAttribute("opacity","0.4");let a=document.querySelector("#camera"),r=new THREE.Vector3;a.object3D.getWorldPosition(r),console.log("Camera Position:",r);let d=o.detail.intersection.point;console.log("Intersection Point:",d);let t=new THREE.Vector3().subVectors(d,r),m=t.length();e.setAttribute("height",`${m}`);let n=new THREE.Vector3().addVectors(r,d).multiplyScalar(.5);e.setAttribute("position",`${n.x} ${n.y} ${n.z}`);let u=new THREE.Vector3(0,1,0),c=new THREE.Vector3().crossVectors(u,t),p=Math.atan2(c.length(),u.dot(t)),E=Math.atan2(t.z,t.x),y=Math.atan2(t.y,Math.sqrt(t.x*t.x+t.z*t.z)),_=new THREE.Euler(y,E,p,"XYZ"),w=new THREE.Vector3(THREE.MathUtils.radToDeg(_.x),THREE.MathUtils.radToDeg(_.y),THREE.MathUtils.radToDeg(_.z));e.setAttribute("rotation",`${w.x} ${180-w.y} ${w.z}`),l.appendChild(e),this.currentLaser=e},this.updateWhileMoving=o=>{if(this.isMouseDown){let l=function(e,a){var r=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0,clientX:e,clientY:a});document.elementFromPoint(e,a).dispatchEvent(r)};console.log(o),l(o.x,o.y),document.elementFromPoint(o.x,o.y).click()}},this.removeLaser=()=>{this.isMouseDown=!1,this.currentLaser&&(this.currentLaser.remove(),this.currentLaser=null)},document.querySelector("#scene"),this.el.addEventListener("mousedown",this.createLaser),this.el.addEventListener("mousemove",this.updateWhileMoving),this.el.addEventListener("mouseup",this.removeLaser)},remove:function(){this.el.removeEventListener("mousedown",this.createLaser),this.el.removeEventListener("mousemove",this.updateLaser),this.el.removeEventListener("mouseup",this.removeLaser)}});const L={};function b(o,l,e,a,r,d){const t=i("a-asset-item"),m=i("a-assets"),n=i("a-box"),u=i("a-plane"),c=i("a-entity"),p=i("a-gltf-model"),E=i("a-scene");return f(),g(E,{id:"scene"},{default:h(()=>[s(m,null,{default:h(()=>[s(t,{id:"sky",src:"../../public/assets/models/sky/scene.gltf"})]),_:1}),s(c,{laser:""},{default:h(()=>[s(n,{position:"0 2.5 -20",width:"30",height:"15",depth:"0.2",color:"#4CC3D9"}),s(n,{position:"-15 2.5 -10",width:"30",height:"5",depth:"0.2",color:"#4CC3D9",rotation:"0 90 0"}),s(n,{position:"15 2.5 -10",width:"30",height:"5",depth:"0.2",color:"#4CC3D9",rotation:"0 90 0"}),s(u,{position:"0 0 -4",rotation:"-90 0 0",width:"40",height:"40",color:"#7BC8A4"})]),_:1}),s(p,{src:"#sky",rotation:"0 180 0"}),s(c,{id:"rig"},{default:h(()=>[s(c,{id:"camera",camera:"","look-controls":"","wasd-controls":"",position:"0 2 1","capture-mouse":"",raycaster:"",cursor:"rayOrigin: mouse",body:"type: static; shape: sphere; sphereRadius: 0.001","super-hands":`colliderEvent: raycaster-intersection;
                                     colliderEventProperty: els;
                                     colliderEndEvent: raycaster-intersection-cleared;
                                     colliderEndEventProperty: clearedEls;`,rotation:"",velocity:"","rotation-reader":""})]),_:1})]),_:1})}const x=v(L,[["render",b]]);export{x as default};
